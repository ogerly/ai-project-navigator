# AI Project Navigator Database Structure

## Overview

The AI Project Navigator uses MongoDB as its primary database to store and manage project-related data. This document outlines the database structure, including the collections and their respective fields.

## Database Name

The database name for the AI Project Navigator is `ai-project-navigator`.

## Collections and Fields

### Users Collection

The `users` collection stores information about the users of the application.

#### Fields

- **_id**: ObjectId (automatically generated by MongoDB)
- **username**: String (unique, required)
- **email**: String (unique, required)
- **password**: String (hashed, required)
- **role**: String (e.g., 'admin', 'user')
- **createdAt**: Date (automatically set to the current date)
- **updatedAt**: Date (automatically updated on modification)

### Projects Collection

The `projects` collection stores information about the projects.

#### Fields

- **_id**: ObjectId (automatically generated by MongoDB)
- **name**: String (required)
- **description**: String
- **owner**: ObjectId (reference to the user who owns the project)
- **teamMembers**: [ObjectId] (array of user references)
- **startDate**: Date
- **endDate**: Date
- **status**: String (e.g., 'planned', 'in progress', 'completed')
- **createdAt**: Date (automatically set to the current date)
- **updatedAt**: Date (automatically updated on modification)

### Tasks Collection

The `tasks` collection stores information about the tasks within projects.

#### Fields

- **_id**: ObjectId (automatically generated by MongoDB)
- **title**: String (required)
- **description**: String
- **assignee**: ObjectId (reference to the user assigned to the task)
- **projectId**: ObjectId (reference to the project the task belongs to)
- **dueDate**: Date
- **status**: String (e.g., 'planned', 'in progress', 'completed')
- **createdAt**: Date (automatically set to the current date)
- **updatedAt**: Date (automatically updated on modification)

### DiaryEntries Collection

The `diaryEntries` collection stores daily diary entries related to the projects.

#### Fields

- **_id**: ObjectId (automatically generated by MongoDB)
- **date**: Date (required)
- **entry**: String (required)
- **tags**: [String] (array of tags)
- **projectId**: ObjectId (reference to the project the entry belongs to)
- **createdAt**: Date (automatically set to the current date)
- **updatedAt**: Date (automatically updated on modification)

### ChatMessages Collection

The `chatMessages` collection stores chat messages exchanged within the project.

#### Fields

- **_id**: ObjectId (automatically generated by MongoDB)
- **sender**: ObjectId (reference to the user who sent the message)
- **content**: String (required)
- **time**: Date (automatically set to the current date and time)
- **room**: String (e.g., 'general', 'development', 'marketing')
- **projectId**: ObjectId (reference to the project the message belongs to)

## Indexes

To optimize query performance, the following indexes should be created:

- **users**: Unique index on `username` and `email`
- **projects**: Index on `owner` and `status`
- **tasks**: Index on `assignee`, `projectId`, and `status`
- **diaryEntries**: Index on `projectId` and `date`
- **chatMessages**: Index on `projectId` and `room`

## Setting Up the Database

To set up the MongoDB database, follow these steps:

1. **Install MongoDB**: Follow the instructions on the [MongoDB website](https://docs.mongodb.com/manual/installation/) to install MongoDB on your system.

2. **Start MongoDB**: Start the MongoDB server using the following command:
   ```sh
   mongod
   ```

3. **Create the Database and Collections**: Use the MongoDB shell or a GUI tool like MongoDB Compass to create the database and collections. Here is an example of how to create the database and collections using the MongoDB shell:
   ```sh
   use ai-project-navigator

   db.createCollection('users')
   db.createCollection('projects')
   db.createCollection('tasks')
   db.createCollection('diaryEntries')
   db.createCollection('chatMessages')
   ```

4. **Create Indexes**: Create the necessary indexes for each collection. Here is an example of how to create indexes using the MongoDB shell:
   ```sh
   db.users.createIndex({ username: 1 }, { unique: true })
   db.users.createIndex({ email: 1 }, { unique: true })
   db.projects.createIndex({ owner: 1 })
   db.projects.createIndex({ status: 1 })
   db.tasks.createIndex({ assignee: 1 })
   db.tasks.createIndex({ projectId: 1 })
   db.tasks.createIndex({ status: 1 })
   db.diaryEntries.createIndex({ projectId: 1 })
   db.diaryEntries.createIndex({ date: 1 })
   db.chatMessages.createIndex({ projectId: 1 })
   db.chatMessages.createIndex({ room: 1 })
   ```

## MongoDB Installation on Pop!_OS

### 1. Add MongoDB Repository

MongoDB is not included in the default Ubuntu repositories. Therefore, you need to add the official MongoDB repository.

```bash
# Add MongoDB GPG key
curl -fsSL https://pgp.mongodb.com/server-7.0.asc | sudo tee /usr/share/keyrings/mongodb-server-key.asc

# Add the repository to the package list
echo "deb [signed-by=/usr/share/keyrings/mongodb-server-key.asc] https://repo.mongodb.org/apt/ubuntu jammy/mongodb-org/7.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list
```

### 2. Update Package Lists and Install MongoDB

```bash
sudo apt update
sudo apt install -y mongodb-org
```

### 3. Start and Enable MongoDB Service

```bash
# Start MongoDB
sudo systemctl start mongod

# Enable MongoDB to start on boot
sudo systemctl enable mongod

# Check the status
sudo systemctl status mongod
```

If the service does not start, you can start `mongod` manually:

```bash
sudo mongod --fork --logpath /var/log/mongodb.log --dbpath /var/lib/mongodb
```

### 4. Test the Installation

```bash
mongosh
```

If `mongosh` is not installed, you can install it:

```bash
sudo apt install -y mongodb-mongosh
```

### 5. Secure MongoDB (Optional)

#### Create Admin User

```javascript
use admin
db.createUser({
    user: "admin",
    pwd: "secure_password",
    roles: [{ role: "root", db: "admin" }]
})
```

#### Enable Authentication in Configuration File

```bash
sudo nano /etc/mongod.conf
```

Add the following:

```
security:
  authorization: enabled
```

Restart MongoDB:

```bash
sudo systemctl restart mongod
```

Log in with:

```bash
mongosh -u admin -p --authenticationDatabase admin
```

### 6. Configure Firewall (Optional)

If MongoDB is to be used over the network:

```bash
sudo ufw allow 27017/tcp
```

If only locally:

```bash
sudo ufw deny 27017/tcp
```

## Uninstall MongoDB (If Needed)

```bash
sudo systemctl stop mongod
sudo apt purge mongodb-org -y
sudo rm -r /var/log/mongodb /var/lib/mongodb
```

